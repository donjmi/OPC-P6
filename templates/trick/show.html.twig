{% extends 'base.html.twig' %}

{% block title %}Trick show{% endblock %}

{% block body %}
<div class="container">
	<section class="py-5">    
    {# Superposition simple #}
    <div class=" overlay-image _b0 ">
        <img class=" image _b1 " src="{{ vich_uploader_asset(trick, 'mainImgFile') }}" alt="{{ trick.name }}" />
        <div class=" text _2 ">{{ trick.name }}</div>
    </div>
	</section>
    

	{% block image %}
		<section class="container">
            <div class="col-md-4">
                <div class="row flex justify-content-start flex-wrap">
                {% for picture in trick.pictures %}
                    <div class="col" style="width= 200px; margin: 5px;">
                    <img src="{{ vich_uploader_asset(picture, 'imageFile') }}" width="150" Alt="" \>
                    <a href="{{ path('picture_edit', {id: picture.id, idTrick: trick.id}) }}">
                    <div class="row flex">
                    <i class="far fa-edit" style="font-size: 20px;">edit</i> 
                    </a>
                    <form method="post" action="{{ path('picture_delete', {'id': picture.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                        <input type="hidden" name="_method" value="DELETE">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ picture.id) }}">
                        <button class="btn"><i class="fas fa-trash"></i></button>
                    </form>
                    </div>
                    
                    </div>
                {% endfor %}
                </div>
            </div>
		</section>
	{% endblock  image %}

	{% block description %}
        <section class="py">
            <div class="container">
            <p>{{ trick.description | raw }}</p>
            </div>
        </section>
    {% endblock %}

    <div class="btn-toolbar infos justify-content-center" role="toolbar" aria-label="Toolbar with button groups">
			<div class="btn-group mr-2" role="group">
				<a href="#" class="btn btn-info">
					Créée le
					{{ trick.createdAt|date("d/m/Y") }}
				</a>
			</div>
            <div class="btn-group mr-2" role="group">
				<a href="#" class="btn btn-info">
					{# {{ trick.category.name }} #}
                    {{ render(controller('App\\Controller\\CategoryController::show', { 'id': trick.category } )) }}
				</a>
			</div>
            {% if trick.createdAt is not same as(trick.updatedAt)  %}
            <div class="btn-group mr-2" role="group">
				<a href="#" class="btn btn-info"> modifié le
					{{ trick.updatedAt|date("d/m/Y") }}
                </a>
			</div>
            {% endif %}
		</div>


    <a href="{{ path('trick_index') }}">back to list</a>

    <a href="{{ path('trick_edit', {'id': trick.id}) }}">edit</a>

    {{ include('trick/_delete_form.html.twig') }}
    </div>
{% endblock %}

